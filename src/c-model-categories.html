<html><head><link rel="import" href="../bower_components/polymer/polymer.html"><link rel="import" href="../bower_components/iron-ajax/iron-ajax.html"></head><body><dom-module id="c-model-categories"><template><iron-ajax url="[[url]]" auto="" handle-as="json" last-response="{{categories}}"></iron-ajax></template><script>"use strict";Polymer({is:"c-model-categories",properties:{url:String,categories:{type:Array,notify:!0,readOnly:!1},isOffline:{type:Boolean,observer:"_retryRequest",notify:!1,readOnly:!1},serviceWorkerActivated:{type:Boolean,observer:"_serviceActive",notify:!1,readOnly:!1}},_retryRequest:function(a,b){!a&&b&&this._analyzeRequest()},_serviceActive:function(a,b){a&&!b&&this._analyzeRequest()},getNameCategory:function(a){return this.categories.find(function(b){return a===b.id}).name||""},_analyzeRequest:function(){var a=this.rootPath+"data/Genres.json";navigator.onLine?this.url=a:"caches"in window&&caches.match(a).then(function(a){a?a.json().then(function(a){this.categories=a}.bind(this)):this.categories=[]}.bind(this))}});</script></dom-module></body></html>